!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tada=e():t.Tada=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),h=function(){function t(){n(this,t),this.config={attribute:"data-src",delay:50,threshold:"20%"},this.elements=[]}return o(t,[{key:"setup",value:function(t){if(this.initialized)throw'"setup" should be called before other methods.';for(var e in t||{})this.config[e]=t[e]}},{key:"init",value:function(){this.initialized||(this.initialized=!0,this.applyDebounce(),this.calcViewport(),this.calcThreshold(),this.bindEvents())}},{key:"applyDebounce",value:function(){this.run=(0,r.debounce)(this.prepare.bind(this),this.config.delay)}},{key:"calcViewport",value:function(){this.viewportHeight=window.innerHeight||document.documentElement.clientHeight,this.viewportWidth=window.innerWidth||document.documentElement.clientWidth}},{key:"calcThreshold",value:function(){var t=this.config.threshold.toString().trim().match(/^(\d+)\s*(px|%)?$/i);if(!t||!t.length)throw'"threshold" value should be a number or "px" or "%".';var e=t[1],i=t[2];"%"===i?(this.thresholdHeight=Math.floor(this.viewportHeight*e/100),this.thresholdWidth=Math.floor(this.viewportWidth*e/100)):this.thresholdHeight=this.thresholdWidth=e}},{key:"bindEvents",value:function(){window.addEventListener("scroll",this.onScroll.bind(this),!1),window.addEventListener("resize",this.onResize.bind(this),!1)}},{key:"onScroll",value:function(){this.run()}},{key:"onResize",value:function(){this.calcViewport(),this.calcThreshold(),this.run()}},{key:"add",value:function(t){if(this.init(),"string"==typeof t)for(var e=document.querySelectorAll(t),i=0,n=e.length;n>i;++i)this.addElement(e[i]);else this.addElement(t);this.run()}},{key:"addElement",value:function(t){this.elements.indexOf(t)>=0||this.used(t)||this.elements.push(t)}},{key:"used",value:function(t){var e=t.getAttribute(this.config.attribute);if("IMG"===t.tagName){if(t.getAttribute("src")===e)return!0}else if(t.style.backgroundImage==="url("+e+")")return!0;return!1}},{key:"prepare",value:function(){for(var t=this.elements.slice(),e=0,i=t.length;i>e;++e){var n=t[e];this.valid(n)&&this.show(n)}}},{key:"valid",value:function(t){if(this.hidden(t))return!1;var e=t.getBoundingClientRect(),i=e.top>=-this.thresholdHeight&&e.top<=this.viewportHeight+this.thresholdHeight,n=e.bottom>=-this.thresholdHeight&&e.bottom<=this.viewportHeight+this.thresholdHeight,o=e.left>=-this.thresholdWidth&&e.left<=this.viewportWidth+this.thresholdWidth,r=e.right>=-this.thresholdWidth&&e.right<=this.viewportWidth+this.thresholdWidth;return(i||n)&&(o||r)}},{key:"hidden",value:function(t){return"none"===window.getComputedStyle(t).display}},{key:"show",value:function(t){var e=t.getAttribute(this.config.attribute);"IMG"===t.tagName?t.setAttribute("src",e):t.style.backgroundImage="url("+e+")",t.removeAttribute(this.config.attribute),this.elements.splice(this.elements.indexOf(t),1),"function"==typeof this.config.callback&&this.config.callback(t)}}]),t}();e["default"]=new h,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(0>=e)return t;var i=void 0;return function(){i&&clearTimeout(i),i=setTimeout(t,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=i}])});