!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tada=e():t.Tada=e()}(window,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r=class{constructor(t){this.config=t,this.init()}init(){this.observer=new IntersectionObserver((t,e)=>{t.forEach(this.execute.bind(this))},{rootMargin:this.config.threshold})}add(t){if("string"==typeof t){let e=document.querySelectorAll(t);for(let t=0,i=e.length;t<i;++t)this.observer.observe(e[t])}else this.observer.observe(t)}execute(t){if(!t.isIntersecting)return;const e=t.target,i=e.tagName,r=e.getAttribute(this.config.attribute);"IMG"===i?e.setAttribute("src",r):e.style.backgroundImage=`url(${r})`,e.removeAttribute(this.config.attribute),this.observer.unobserve(e),"function"==typeof this.config.callback&&this.config.callback(e)}};var n=class{constructor(t){this.config=t,this.elements=[]}setup(t){if(this.initialized)throw new Error('"setup" should be called before other methods.');for(let e in t||{})this.config[e]=t[e]}init(){this.initialized||(this.initialized=!0,this.applyDebounce(),this.calcViewport(),this.calcThreshold(),this.bindEvents())}applyDebounce(){this.run=function(t,e){if(e<=0)return t;let i;return function(){i&&clearTimeout(i),i=setTimeout(t,e)}}(this.prepare.bind(this),this.config.delay)}calcViewport(){this.viewportHeight=window.innerHeight||document.documentElement.clientHeight,this.viewportWidth=window.innerWidth||document.documentElement.clientWidth}calcThreshold(){let t=this.config.threshold.toString().trim().match(/^(\d+)\s*(px|%)?$/i);if(!t||!t.length)throw new Error('"threshold" value should be a number or "px" or "%".');let e=t[1];"%"===t[2]?(this.thresholdHeight=Math.floor(this.viewportHeight*e/100),this.thresholdWidth=Math.floor(this.viewportWidth*e/100)):this.thresholdHeight=this.thresholdWidth=e}bindEvents(){window.addEventListener("scroll",this.onScroll.bind(this),!1),window.addEventListener("resize",this.onResize.bind(this),!1)}onScroll(){this.run()}onResize(){this.calcViewport(),this.calcThreshold(),this.run()}add(t){if(this.init(),"string"==typeof t){let e=document.querySelectorAll(t);for(let t=0,i=e.length;t<i;++t)this.addElement(e[t])}else this.addElement(t);this.run()}addElement(t){this.elements.indexOf(t)>=0||this.used(t)||this.elements.push(t)}used(t){let e=t.getAttribute(this.config.attribute);if("IMG"===t.tagName){if(t.getAttribute("src")===e)return!0}else if(t.style.backgroundImage===`url(${e})`)return!0;return!1}prepare(){let t=this.elements.slice();for(let e=0,i=t.length;e<i;++e){let i=t[e];this.valid(i)&&this.show(i)}}valid(t){if(this.hidden(t))return!1;let e=t.getBoundingClientRect(),i=e.top>=-this.thresholdHeight&&e.top<=this.viewportHeight+this.thresholdHeight,r=e.bottom>=-this.thresholdHeight&&e.bottom<=this.viewportHeight+this.thresholdHeight,n=e.left>=-this.thresholdWidth&&e.left<=this.viewportWidth+this.thresholdWidth,s=e.right>=-this.thresholdWidth&&e.right<=this.viewportWidth+this.thresholdWidth;return(i||r)&&(n||s)}hidden(t){return"none"===window.getComputedStyle(t).display}show(t){let e=t.getAttribute(this.config.attribute);"IMG"===t.tagName?t.setAttribute("src",e):t.style.backgroundImage=`url(${e})`,t.removeAttribute(this.config.attribute),this.elements.splice(this.elements.indexOf(t),1),"function"==typeof this.config.callback&&this.config.callback(t)}addContainer(t){this.initialized||this.init(),document.querySelectorAll(t).forEach(t=>{t.addEventListener("scroll",this.run)})}};const s={setup(t){this.config=Object.assign({},{attribute:"data-src",delay:50,threshold:"20%"},t),this.useIntersectionObserver="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype,this.useIntersectionObserver=!1,this.useIntersectionObserver?this.instance=new r(this.config):this.instance=new n(this.config)},check(){this.instance||this.setup()},add(t){this.check(),this.instance.add(t)},addContainer(t){this.check(),!this.useIntersectionObserver&&this.instance.addContainer(t)},run(){this.check(),!this.useIntersectionObserver&&this.instance.run()}};e.default=s}])});